@model AA.HRMS.Interfaces.IUserViewModel

@{
    ViewBag.Title = "Edit User";
}

<div class="modal-header">
    <h3>@ViewBag.Title</h3>
    <button type="button" class="close" data-dismiss="modal">&times;</button>
</div>


<div class="columns" style="font-size: 12px; margin-left: 15px; margin-top: 15px; width: 100%;">
    <div class="validation-summary-errors">
        @Html.ValidationSummary()
        @Model.ProcessingMessage
    </div>
</div>

@using (Html.BeginForm("EditUser", "Users", FormMethod.Post))
{
    @Html.AntiForgeryToken()


    <div class="modal-body">



        <input type="hidden" id="userId" name="userId" value="@Model.UserId" />
        <input type="hidden" id="FirstName" name="FirstName" value="@Model.FirstName" />

        <input type="hidden" id="LastName" name="LastName" value="@Model.LastName" />
        <input type="hidden" id="Username" name="Username" value="@Model.Username" />

        <input type="hidden" id="StaffNumber" name="StaffNumber" value="@Model.StaffNumber" />
        <input type="hidden" id="Email" name="Email" value="@Model.Email" />

        <input type="hidden" id="CompanyName" name="CompanyName" value="@Model.CompanyName" />

        <input type="hidden" id="JobTitle" name="JobTitle" value="@Model.JobTitle" />
        <input type="hidden" id="Role" name="Role" value="@Model.Role" />

        <input type="hidden" id="IsUserVerified" name="IsUserVerified" value="@Model.IsUserVerified" />
        <input type="hidden" id="DateCreated" name="DateCreated" value="@Model.DateCreated" />

        <input type="hidden" id="DateVerified" name="DateVerified" value="@Model.DateVerified" />
        <input type="hidden" id="AppRoleCollection" name="AppRoleCollection" value="@Model.AppRoleCollection" />



        <div class="form-example-int">
            <div class="form-group">
                <label>Company Name</label>
                <div class="nk-int-st">
                    @Html.DropDownList("companyId", Model.CompanyDropDown, new { @class = "form-control input-sm", id = "companyId" })
                </div>
            </div>
        </div>

        </div>

        <div class="modal-footer">
            <button type="submit" name="submitButton" value="Submit" class="btn btn-default">Add</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
        }

        <script type="text/javascript">
            $(document).ready(function () {
                $("span.ui-dialog-title").text('Edit Department ' + $('#departmentName').val());

                $('#btnCancel').click(function () {
                    window.location.href = '/Administration/User';
                    return false;
                });


                $('#companyId').change(function () {
                    $('#userId').trigger("propertychange");
                });

                $('#userId').bind('input propertychange', function () {
                    $('#btnSubmit').prop("class", "grayButton");
                    $('#btnSubmit').prop("disabled", true);

                    var companyIdOkay = $('#userId').val() > 0;

                    if ((companyIdOkay))) {
                    $('#btnSubmit').prop("class", "blueButton");
                    $('#btnSubmit').prop("disabled", false);
                }
            });

            $('#userId').trigger("propertychange");

            });
        </script>
