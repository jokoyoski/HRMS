@model AA.HRMS.Interfaces.IEmployeeExitView

@{
    ViewBag.Title = "AA HRMS - Add Employee Exit";
}

<div class="breadcomb-area">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="breadcomb-list">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                            <div class="breadcomb-wp">
                                <div class="breadcomb-icon">
                                    <i class="notika-icon notika-support"></i>
                                </div>
                                <div class="breadcomb-ctn">
                                    <h2>@Model.Employee.LastName @Model.Employee.FirstName Exit</h2>
                                    <p><span class="bread-ntd"><strong>@Model.Employee.StaffNumber</strong></span></p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-3">
                            <div class="breadcomb-report">
                                <a data-toggle="tooltip" data-placement="left" title="Back to Employee View" class="btn" href="/Employee/ViewEmployee?employeeId=@Model.Employee.EmployeeId"><i class="notika-icon notika-back"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


@if (!string.IsNullOrEmpty(Model.ProcessingMessage))
{

    <div class="alert alert-info alert-dismissible" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true"><i class="notika-icon notika-close"></i></span></button> @Model.ProcessingMessage
    </div>
}


<div class="form-element-area">
    <div class="container">
        <div class="row">
            <div>

                @using (Html.BeginForm("AddEmployeeExit", "ExitManagement", FormMethod.Post, new { id = "addDeptForm" }))
                {
                    @Html.AntiForgeryToken()

                    <input type="hidden" name="employeeId" id="employeeId" value="@Model.Employee.EmployeeId" />

                    <input type="hidden" name="companyId" id="companyId" value="@Model.Company.CompanyId" />

                    <input type="hidden" name="name" id="name" value="@(Model.Employee.LastName+" "+Model.Employee.FirstName) " />



                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-xs-12">
                            <div class="form-element-list">

                                <div class="validation-summary-errors">
                                    @Html.ValidationSummary(true, "", new { @clas = "text-danger" })
                                </div>
                                <div class="row">
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group ic-cmp-int">
                                            <div class="form-ic-cmp">
                                                <label>Type of Exit</label>
                                                @Html.DropDownList("typeOfExitId", Model.TypeOfExitDropDown, new { @class = "form-control", id = "typeOfExitId" })
                                            </div>
                                        </div>
                                    </div>



                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group ic-cmp-int">
                                            <div class="form-ic-cmp">
                                                <label>Interviewer</label>
                                                <input id="interviewer" name="interviewer" class="form-control" type="text" value="@Model.Interviewer" />
                                                @Html.ValidationMessageFor(model => model.Interviewer, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group ic-cmp-int">
                                            <div class="form-ic-cmp">
                                                <label>Exit InterView Summary</label>
                                                <input id="exitInterViewSummary" name="exitInterViewSummary" class="form-control" type="text" maxlength="200" value="@Model.ExitInterViewSummary" />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group ic-cmp-int">
                                            <div class="form-ic-cmp">
                                                <label>Interview Date</label>
                                                <input id="interviewDate" name="interviewDate" class="form-control" type="date" value="@Model.InterviewDate" />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                        <div class="form-group ic-cmp-int">
                                            <div class="form-ic-cmp">
                                                <label>Reason For Exit</label>
                                                <textarea id="reason" name="reason" class="form-control" type="text" value="@Model.Reason">@Model.Reason</textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="container row">
                                    <p></p>
                                    <div class="form-inline">

                                        <div class="modal-footer">
                                            <button type="submit" name="submitButton" class="btn btn-primary">Submit</button>
                                            <a href="/Employee/ViewEmployee?employeeId=@Model.Employee.EmployeeId" class="btn btn-default">Back</a>
                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {

        $("span.ui-dialog-title").text('Exit Employee');

        $('#btnCancel').click(function () {
            window.location.href = '/Employee/ViewEmployee?employeeId='+@Model.EmployeeId;
            return false;
        });

        $('#reason').change(function () {
            $('#companyId').trigger("propertychange");
        });

        $('#typeOfExitId').change(function () {
            $('#companyId').trigger("propertychange");
        });

        $('#companyId').bind('input propertychange', function () {
            $('#btnSubmit').prop("class", "grayButton");
            $('#btnSubmit').prop("disabled", true);

            var reasonNameOkay = $('#reason').val().length > 0;
            var typeOfExitIdOkay = $('#typeOfExitId').val() > 0;
            var companyIdOkay = $('#companyId').val() > 0;

            if ((reasonNameOkay) && (typeOfExitIdOkay) && (companyIdOkay)) {
                $('#btnSubmit').prop("class", "btn btn-primary");
                $('#btnSubmit').prop("disabled", false);
            }
        });

        $('#addDeptForm').submit(function () {
            //window.open('', 'formpopup', 'width=400,height=400,resizeable,scrollbars');
            this.target = '$popupDialog';
        });

    });
</script>
